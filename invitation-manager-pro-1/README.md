# Invitation Manager Pro - إدارة الدعوات الاحترافية

إضافة ووردبريس متقدمة لإدارة الدعوات والمناسبات بشكل احترافي وآمن.

## نظرة عامة

Invitation Manager Pro هي إضافة ووردبريس شاملة تم تطويرها لإدارة الدعوات والمناسبات بطريقة احترافية وآمنة. تتميز الإضافة بهيكل برمجي متقدم وأمان عالي مع دعم كامل للغة العربية.

## المميزات الرئيسية

### إدارة المناسبات
- إنشاء وإدارة المناسبات المختلفة
- تخصيص تفاصيل المناسبة (التاريخ، الوقت، المكان، الوصف)
- رفع صور الدعوات
- إدارة معلومات الاتصال

### إدارة المدعوين
- إضافة المدعوين فردياً أو بشكل جماعي
- تصنيف المدعوين (عائلة، أصدقاء، زملاء عمل، إلخ)
- إدارة المرافقين
- استيراد المدعوين من ملفات CSV

### نظام الدعوات
- إنشاء روابط دعوة فريدة لكل مدعو
- إرسال الدعوات عبر البريد الإلكتروني
- تخصيص قوالب البريد الإلكتروني
- تتبع حالة الدعوات

### نظام RSVP
- تأكيد الحضور أو الاعتذار
- إدارة المرافقين
- تسجيل المتطلبات الغذائية
- إحصائيات مفصلة للردود

### الأمان والأداء
- استعلامات SQL آمنة مع Prepared Statements
- نظام تخزين مؤقت متقدم
- تشفير البيانات الحساسة
- حماية من هجمات CSRF و XSS

### التقارير والإحصائيات
- تقارير مفصلة عن المدعوين والردود
- إحصائيات في الوقت الفعلي
- تصدير البيانات بصيغ مختلفة

## متطلبات النظام

- WordPress 5.0 أو أحدث
- PHP 7.4 أو أحدث
- MySQL 5.7 أو أحدث
- ذاكرة PHP: 128MB كحد أدنى (256MB مُوصى به)

## التثبيت

### التثبيت اليدوي

1. قم بتحميل ملفات الإضافة إلى مجلد `/wp-content/plugins/invitation-manager-pro/`
2. فعّل الإضافة من لوحة تحكم ووردبريس
3. انتقل إلى "إدارة الدعوات" في القائمة الجانبية
4. اتبع معالج الإعداد الأولي

### التثبيت عبر SSH

```bash
# الانتقال إلى مجلد الإضافات
cd /path/to/wordpress/wp-content/plugins/

# إنشاء مجلد الإضافة
mkdir invitation-manager-pro

# رفع الملفات (استخدم أحد الطرق التالية)
# الطريقة الأولى: رفع ملف مضغوط
scp invitation-manager-pro.zip user@server:/path/to/plugins/
unzip invitation-manager-pro.zip

# الطريقة الثانية: رفع الملفات مباشرة
scp -r invitation-manager-pro/* user@server:/path/to/plugins/invitation-manager-pro/

# تعيين الصلاحيات المناسبة
chown -R www-data:www-data invitation-manager-pro/
chmod -R 755 invitation-manager-pro/
```

## الإعداد الأولي

### إعدادات قاعدة البيانات

الإضافة تقوم بإنشاء الجداول التالية تلقائياً:

- `wp_impro_events` - جدول المناسبات
- `wp_impro_guests` - جدول المدعوين
- `wp_impro_invitations` - جدول الدعوات
- `wp_impro_rsvps` - جدول ردود الحضور
- `wp_impro_email_logs` - جدول سجلات البريد الإلكتروني

### إعدادات البريد الإلكتروني

1. انتقل إلى "إدارة الدعوات" > "الإعدادات"
2. قم بتكوين إعدادات SMTP
3. اختبر إرسال البريد الإلكتروني
4. خصص قوالب البريد الإلكتروني

### إعدادات الأمان

1. فعّل التشفير للبيانات الحساسة
2. قم بتكوين مفاتيح API إذا لزم الأمر
3. راجع إعدادات الصلاحيات

## الاستخدام

### إنشاء مناسبة جديدة

1. انتقل إلى "إدارة الدعوات" > "المناسبات"
2. اضغط على "إضافة مناسبة جديدة"
3. املأ تفاصيل المناسبة
4. احفظ المناسبة

### إضافة المدعوين

#### الإضافة الفردية
1. انتقل إلى "المدعوين" > "إضافة جديد"
2. املأ بيانات المدعو
3. حدد فئة المدعو
4. احفظ البيانات

#### الاستيراد الجماعي
1. انتقل إلى "المدعوين" > "استيراد"
2. حمّل ملف CSV بالتنسيق المطلوب
3. راجع البيانات المستوردة
4. أكد الاستيراد

### إرسال الدعوات

1. انتقل إلى "الدعوات"
2. اختر المناسبة والمدعوين
3. خصص رسالة الدعوة
4. أرسل الدعوات

### متابعة الردود

1. انتقل إلى "الردود"
2. راجع حالة كل دعوة
3. تابع الإحصائيات
4. صدّر التقارير

## الاختصارات (Shortcodes)

### عرض صفحة الدعوة
```
[impro_invitation_page token="invitation_token"]
```

### نموذج تأكيد الحضور
```
[impro_rsvp_form token="invitation_token"]
```

### قائمة المناسبات
```
[impro_event_list limit="10" status="upcoming"]
```

### عداد المدعوين
```
[impro_guest_count event_id="123" type="attending"]
```

### إحصائيات الردود
```
[impro_rsvp_stats event_id="123" show_chart="yes"]
```

### العد التنازلي للمناسبة
```
[impro_event_countdown event_id="123" format="full"]
```

## API المطور

### إنشاء مناسبة برمجياً

```php
$event_manager = new IMPRO_Event_Manager();
$event_id = $event_manager->create_event(array(
    'name' => 'اسم المناسبة',
    'event_date' => '2024-12-31',
    'event_time' => '19:00:00',
    'venue' => 'مكان المناسبة',
    'description' => 'وصف المناسبة'
));
```

### إضافة مدعو

```php
$guest_manager = new IMPRO_Guest_Manager();
$guest_id = $guest_manager->create_guest(array(
    'name' => 'اسم المدعو',
    'email' => 'email@example.com',
    'phone' => '0501234567',
    'category' => 'family'
));
```

### إنشاء دعوة

```php
$invitation_manager = new IMPRO_Invitation_Manager();
$invitation_id = $invitation_manager->create_invitation($event_id, $guest_id);
```

### إرسال دعوة

```php
$invitation = $invitation_manager->get_invitation($invitation_id);
$guest = $guest_manager->get_guest($guest_id);
$event = $event_manager->get_event($event_id);

IMPRO_Email::send_invitation($invitation, $guest, $event);
```

## الهوكس والفلاتر

### الهوكس (Actions)

```php
// قبل إنشاء مناسبة
do_action('impro_before_create_event', $event_data);

// بعد إنشاء مناسبة
do_action('impro_after_create_event', $event_id, $event_data);

// قبل إرسال دعوة
do_action('impro_before_send_invitation', $invitation, $guest, $event);

// بعد تأكيد الحضور
do_action('impro_after_rsvp_response', $rsvp_id, $response_data);
```

### الفلاتر (Filters)

```php
// تخصيص قالب البريد الإلكتروني
add_filter('impro_email_template', function($template, $event) {
    // تخصيص القالب
    return $template;
}, 10, 2);

// تخصيص فئات المدعوين
add_filter('impro_guest_categories', function($categories) {
    $categories['custom'] = 'فئة مخصصة';
    return $categories;
});

// تخصيص رابط الدعوة
add_filter('impro_invitation_url', function($url, $token) {
    // تخصيص الرابط
    return $url;
}, 10, 2);
```

## الأمان

### حماية البيانات
- جميع المدخلات يتم تنظيفها وتحقق من صحتها
- استخدام Prepared Statements لجميع استعلامات قاعدة البيانات
- تشفير البيانات الحساسة
- حماية من هجمات CSRF

### صلاحيات المستخدمين
- `manage_invitations` - إدارة الدعوات
- `create_events` - إنشاء المناسبات
- `manage_guests` - إدارة المدعوين
- `view_reports` - عرض التقارير

### تسجيل الأنشطة
- تسجيل جميع العمليات المهمة
- مراقبة محاولات الوصول غير المصرح بها
- تنبيهات الأمان

## الأداء

### التخزين المؤقت
- تخزين مؤقت للاستعلامات المتكررة
- تخزين مؤقت للصفحات الثابتة
- تحسين الصور تلقائياً

### تحسين قاعدة البيانات
- فهارس محسنة للجداول
- استعلامات محسنة
- تنظيف البيانات القديمة تلقائياً

## استكشاف الأخطاء

### مشاكل شائعة

#### لا تصل رسائل البريد الإلكتروني
1. تحقق من إعدادات SMTP
2. تأكد من صحة بيانات الخادم
3. راجع سجلات البريد الإلكتروني

#### مشاكل في الأداء
1. فعّل التخزين المؤقت
2. تحقق من فهارس قاعدة البيانات
3. راجع استهلاك الذاكرة

#### أخطاء في قاعدة البيانات
1. تحقق من صحة الجداول
2. أعد تشغيل الترحيل
3. راجع سجلات الأخطاء

### تفعيل وضع التطوير

```php
// في ملف wp-config.php
define('IMPRO_DEBUG', true);
define('IMPRO_LOG_QUERIES', true);
```

## التحديث

### التحديث التلقائي
الإضافة تدعم التحديث التلقائي عبر ووردبريس.

### التحديث اليدوي
1. قم بعمل نسخة احتياطية من قاعدة البيانات
2. حمّل الإصدار الجديد
3. فعّل الإضافة
4. تحقق من سلامة البيانات

## الدعم الفني

### الوثائق
- [دليل المستخدم المفصل](docs/user-guide.md)
- [دليل المطور](docs/developer-guide.md)
- [أمثلة الكود](docs/code-examples.md)

### المجتمع
- منتدى الدعم
- قناة التليجرام
- مجموعة الفيسبوك

## المساهمة

نرحب بمساهماتكم في تطوير الإضافة:

1. Fork المشروع
2. أنشئ فرع للميزة الجديدة
3. اكتب الكود مع التوثيق
4. أرسل Pull Request

## الترخيص

هذه الإضافة مرخصة تحت رخصة GPL v2 أو أحدث.

## الشكر والتقدير

شكر خاص لجميع المساهمين والمختبرين الذين ساعدوا في تطوير هذه الإضافة.

---

**تم التطوير بواسطة:** Manus AI  
**الإصدار:** 1.0.0  
**تاريخ آخر تحديث:** 2024

